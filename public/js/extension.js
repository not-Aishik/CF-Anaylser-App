const params = new URLSearchParams(document.location.search);
const userID = params.get("id");

const url = "http://localhost:3000/data/?id=" + userID + "";
fetch(url).then((response) => {
  console.log(
    response.json().then((data) => {
      if (data.error) {
        username.textContent = data.error;
      } else {
        username.textContent = data.ID;
        average.textContent = data.average;
        var ctx = document.getElementById("myChart");
        var myChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: [
              "800",
              "900",
              "1000",
              "1100",
              "1200",
              "1300",
              "1400",
              "1500",
              "1600",
              "1700",
              "1800",
              "1900",
              "2000",
              "2100",
              "2200",
              "2300",
              "2400",
              "2500",
              "2600",
              "2700",
              "2800",
              "2900",
              "3000",
              "3100",
              "3200",
              "3300",
              "3400",
              "3500",
            ],
            datasets: [
              {
                label: "Number of solved",
                data: [
                  data.p800,
                  data.p900,
                  data.p1000,
                  data.p1100,
                  data.p1200,
                  data.p1300,
                  data.p1400,
                  data.p1500,
                  data.p1600,
                  data.p1700,
                  data.p1800,
                  data.p1900,
                  data.p2000,
                  data.p2100,
                  data.p2200,
                  data.p2300,
                  data.p2400,
                  data.p2500,
                  data.p2600,
                  data.p2700,
                  data.p2800,
                  data.p2900,
                  data.p3000,
                  data.p3100,
                  data.p3200,
                  data.p3300,
                  data.p3400,
                  data.p3500,
                ],
                backgroundColor: [
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                ],
                borderColor: [
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                  "rgba(0, 0, 255, 0.7)",
                ],
                borderWidth: 1,
              },
            ],
          },
          options: {
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }
    })
  );
});
